<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Summon Animal - Creature Comparison</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body {
            font-family: 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background-color: #1a1a1a;
            color: #dcdcdc;
            line-height: 1.6;
        }
        
        .container-fluid {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .card {
            background-color: #232323;
            border: 1px solid #444;
            color: #dcdcdc;
        }
        
        .card-header {
            background-color: #2a2a2a;
            border-bottom: 1px solid #444;
            color: #66ccff;
        }
        
        .btn-primary {
            background-color: #66ccff;
            border-color: #66ccff;
            color: #1a1a1a;
        }
        
        .btn-primary:hover {
            background-color: #82b1ff;
            border-color: #82b1ff;
        }
        
        .form-control, .form-select {
            background-color: #2a2a2a;
            border-color: #444;
            color: #dcdcdc;
        }
        
        .form-control:focus, .form-select:focus {
            background-color: #2a2a2a;
            border-color: #66ccff;
            color: #dcdcdc;
        }
        
        .badge {
            font-size: 0.75rem;
        }
        
        .animal-card {
            transition: transform 0.2s;
        }
        
        .animal-card:hover {
            transform: translateY(-5px);
        }
        
        a {
            color: #58a6ff;
        }
        
        a:hover {
            color: #82b1ff;
        }
        
        .modal-content {
            background-color: #232323;
            color: #dcdcdc;
        }
        
        .modal-header {
            border-bottom-color: #444;
        }
        
        .table {
            color: #dcdcdc;
        }
        
        .table-dark {
            --bs-table-bg: #2a2a2a;
            --bs-table-border-color: #444;
        }
        
        .table-striped > tbody > tr:nth-of-type(odd) > * {
            --bs-table-accent-bg: rgba(102, 204, 255, 0.05);
        }
    </style>
</head>
<body>

<div class="container-fluid mt-4">
    <div class="row">
        <div class="col-12">
            <h1 class="text-center mb-4">
                <i class="fas fa-paw"></i> Summon Animal - Creature Comparison
            </h1>
            <p class="text-center text-muted mb-4">
                Compare animals for the <strong>Summon Animal</strong> spell. Filter by level, traits, and abilities.
                <br>
                <small>
                    <strong>{{metadata.animal_count}}</strong> animals â€¢ 
                    <strong>Level {{minLevel}}-{{maxLevel}}</strong>
                </small>
            </p>
        </div>
    </div>

    <div class="row">
        {{!-- Filter Panel --}}
        <div class="col-lg-3 mb-4">
            {{> filter-panel
                levelLabel="Summon at Spell Level"
                levelHelp="Shows normal, weak, and elite versions at this level"
                minLevel=minLevel
                maxLevel=maxLevel
                traits=traits
                creatureCount=metadata.animal_count
                creatureType="animals"
            }}
        </div>

        {{!-- Results Panel --}}
        <div class="col-lg-9">
            <div class="card shadow-sm">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0"><i class="fas fa-list"></i> Animals</h5>
                    <div class="btn-group btn-group-sm" role="group">
                        <button type="button" class="btn btn-outline-light active" data-view="cards">
                            <i class="fas fa-th"></i> Cards
                        </button>
                        <button type="button" class="btn btn-outline-light" data-view="table">
                            <i class="fas fa-table"></i> Table
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    {{!-- Loading Spinner --}}
                    <div id="loadingSpinner" class="text-center py-5" style="display: none;">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <p class="mt-2 text-muted">Loading animals...</p>
                    </div>

                    {{!-- Results Container (Cards View) --}}
                    <div id="resultsContainer" class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-3">
                        {{#each animals}}
                            {{> creature-card}}
                        {{/each}}
                    </div>

                    {{!-- Results Container (Table View) --}}
                    <div id="tableContainer" class="table-responsive" style="display: none;">
                        <table class="table table-striped table-hover" id="animalsTable">
                            <thead class="table-dark">
                                <tr>
                                    <th>Name</th>
                                    <th>Level</th>
                                    <th>HP</th>
                                    <th>AC</th>
                                    <th>Size</th>
                                    <th>Speed</th>
                                    <th>Traits</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                {{#each animals}}
                                    {{> creature-table-row}}
                                {{/each}}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{{!-- Animal Detail Modal --}}
{{> creature-detail-modal}}

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- Animals UI Controller -->
<script src="/static/js/animals-ui.js"></script>

</body>
</html>
